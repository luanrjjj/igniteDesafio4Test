{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/luan/Documentos/IgniteDesafio4Correto/src/pages/post/[slug].tsx\";\nimport Head from 'next/head';\nimport { FiCalendar, FiClock, FiUser } from 'react-icons/fi';\nimport { getPrismicClient } from '../../services/prismic';\nimport Prismic from '@prismicio/client';\nimport PrismicDOM from 'prismic-dom';\nimport { format } from 'date-fns';\nimport ptBR from 'date-fns/locale/pt-BR';\nimport styles from './post.module.scss';\nimport { useRouter } from 'next/router';\nimport { Fragment } from 'react';\nimport Header from '../../components/Header';\nimport { UtterancesComments } from '../../components/UtterancesComments';\nimport Link from 'next/link';\nexport default function Post({\n  post,\n  previousPost,\n  nextPost,\n  preview\n}) {\n  const router = useRouter();\n\n  const reducer = (sumContent, thisContent) => {\n    const headingWords = thisContent.heading.split(/\\s/g).length;\n    const bodyWords = thisContent.body.reduce((sumBody, thisBody) => {\n      const textWords = thisBody.text.split(/\\s/g).length;\n      return sumBody + textWords;\n    }, 0);\n    return sumContent + headingWords + bodyWords;\n  };\n\n  const wordCount = post.data.content.reduce(reducer, 0);\n\n  if (router.isFallback) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Carregando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: [post.data.title, \" | SpaceTravelingBlog\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      className: styles.banner,\n      src: post.data.banner.url\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(\"article\", {\n        className: styles.post,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: post.data.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: styles.postStatus,\n          children: [/*#__PURE__*/_jsxDEV(\"time\", {\n            children: [/*#__PURE__*/_jsxDEV(FiCalendar, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 15\n            }, this), '  ' + format(new Date(post.first_publication_date), 'dd MMM yyyy', {\n              locale: ptBR\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(FiUser, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 15\n            }, this), '  ' + post.data.author]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(FiClock, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this), \" \", '  ', \" \", Math.ceil(wordCount / 200), \" min\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: '* editado em ' + format(new Date(post.last_publication_date), 'dd MMM yyyy', {\n              locale: ptBR\n            }) + ', às ' + format(new Date(post.last_publication_date), 'HH:mm', {\n              locale: ptBR\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: styles.content,\n          children: post.data.content.map(({\n            heading,\n            body\n          }) => /*#__PURE__*/_jsxDEV(Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: heading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              dangerouslySetInnerHTML: {\n                __html: PrismicDOM.RichText.asHtml(body)\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 17\n            }, this)]\n          }, heading, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.navPosts,\n        children: [previousPost.uid ? /*#__PURE__*/_jsxDEV(Link, {\n          href: `/post/${previousPost.uid}`,\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Previous Post\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 17\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 48\n            }, this), `${previousPost.title}`]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"a\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this), nextPost.uid ? /*#__PURE__*/_jsxDEV(Link, {\n          href: `/post/${nextPost.uid}`,\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Next Post\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 17\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 44\n            }, this), `${nextPost.title}`]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"a\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '3rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(UtterancesComments, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.previewMode,\n        children: [/*#__PURE__*/_jsxDEV(\"script\", {\n          async: true,\n          defer: true,\n          src: \"https://static.cdn.prismic.io/prismic.js?new=true&repo=spacetravelingblg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), preview ? /*#__PURE__*/_jsxDEV(\"aside\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/api/exit-preview\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: \"Sair do modo Preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"aside\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/api/preview\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: \"Entrar no modo Preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\nexport const getStaticPaths = async () => {\n  const prismic = getPrismicClient();\n  const posts = await prismic.query([Prismic.predicates.at('document.type', 'pos')]);\n  const paths = posts.results.map(post => ({\n    params: {\n      slug: post.uid\n    }\n  }));\n  return {\n    paths: paths,\n    fallback: true\n  };\n};\nexport const getStaticProps = async ({\n  params,\n  preview = false\n}) => {\n  const {\n    slug\n  } = params;\n  const prismic = getPrismicClient();\n  const response = await prismic.getByUID('pos', String(slug), {});\n\n  if (!response) {\n    return {\n      redirect: {\n        destination: '/',\n        permanent: false\n      }\n    };\n  }\n\n  const post = {\n    first_publication_date: response.first_publication_date,\n    last_publication_date: response.last_publication_date,\n    uid: response.uid,\n    data: {\n      title: response.data.title,\n      subtitle: response.data.subtitle,\n      banner: response.data.banner,\n      author: response.data.author,\n      content: response.data.content.map(({\n        heading,\n        body\n      }) => {\n        return {\n          heading: heading,\n          body: body\n        };\n      })\n    }\n  };\n  const responsePreviousPost = (await prismic.query(Prismic.Predicates.dateBefore('document.first_publication_date', response.first_publication_date), {\n    orderings: '[document.first_publication_date]'\n  })).results.pop();\n  const responseNextPost = (await prismic.query(Prismic.Predicates.dateAfter('document.first_publication_date', response.first_publication_date), {\n    orderings: '[document.first_publication_date]'\n  })).results[0];\n  const previousPost = {\n    uid: responsePreviousPost !== null && responsePreviousPost !== void 0 && responsePreviousPost.uid ? responsePreviousPost.uid : '',\n    title: responsePreviousPost !== null && responsePreviousPost !== void 0 && responsePreviousPost.data.title ? responsePreviousPost.data.title : ''\n  };\n  const nextPost = {\n    uid: responseNextPost !== null && responseNextPost !== void 0 && responseNextPost.uid ? responseNextPost.uid : '',\n    title: responseNextPost !== null && responseNextPost !== void 0 && responseNextPost.data.title ? responseNextPost.data.title : ''\n  };\n  return {\n    props: {\n      post,\n      previousPost,\n      nextPost,\n      preview\n    },\n    revalidate: 60 * 30\n  };\n};","map":{"version":3,"sources":["/home/luan/Documentos/IgniteDesafio4Correto/src/pages/post/[slug].tsx"],"names":["Head","FiCalendar","FiClock","FiUser","getPrismicClient","Prismic","PrismicDOM","format","ptBR","styles","useRouter","Fragment","Header","UtterancesComments","Link","Post","post","previousPost","nextPost","preview","router","reducer","sumContent","thisContent","headingWords","heading","split","length","bodyWords","body","reduce","sumBody","thisBody","textWords","text","wordCount","data","content","isFallback","title","banner","url","container","postStatus","Date","first_publication_date","locale","author","Math","ceil","last_publication_date","map","__html","RichText","asHtml","navPosts","uid","marginBottom","previewMode","getStaticPaths","prismic","posts","query","predicates","at","paths","results","params","slug","fallback","getStaticProps","response","getByUID","String","redirect","destination","permanent","subtitle","responsePreviousPost","Predicates","dateBefore","orderings","pop","responseNextPost","dateAfter","props","revalidate"],"mappings":"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","sourcesContent":["import next, { GetStaticPaths, GetStaticProps } from 'next';\nimport Head from 'next/head';\nimport { FiCalendar, FiClock, FiUser } from 'react-icons/fi';\n\nimport { getPrismicClient } from '../../services/prismic';\nimport Prismic from '@prismicio/client';\nimport PrismicDOM from 'prismic-dom';\nimport { format } from 'date-fns';\nimport ptBR from 'date-fns/locale/pt-BR';\nimport styles from './post.module.scss';\nimport { useRouter } from 'next/router';\nimport { Fragment } from 'react';\nimport Header from '../../components/Header';\nimport { UtterancesComments } from '../../components/UtterancesComments';\nimport Link from 'next/link';\n\ninterface Post {\n  first_publication_date: string | null;\n  last_publication_date: string | null;\n  data: {\n    title: string;\n    banner: {\n      url: string;\n    };\n    author: string;\n    content: {\n      heading: string;\n      body: {\n        text: string;\n      }[];\n    }[];\n  };\n}\n\ninterface PostProps {\n  post: Post;\n  preview: boolean;\n  previousPost: { uid?: string; title?: string };\n  nextPost: { uid?: string; title?: string };\n}\n\nexport default function Post({\n  post,\n  previousPost,\n  nextPost,\n  preview,\n}: PostProps) {\n  const router = useRouter();\n\n  const reducer = (sumContent, thisContent) => {\n    const headingWords = thisContent.heading.split(/\\s/g).length;\n    const bodyWords = thisContent.body.reduce((sumBody, thisBody) => {\n      const textWords = thisBody.text.split(/\\s/g).length;\n\n      return sumBody + textWords;\n    }, 0);\n    return sumContent + headingWords + bodyWords;\n  };\n\n  const wordCount = post.data.content.reduce(reducer, 0);\n\n  if (router.isFallback) {\n    return <div>Carregando...</div>;\n  }\n\n  return (\n    <>\n      <Head>\n        <title>{post.data.title} | SpaceTravelingBlog</title>\n      </Head>\n\n      <Header />\n\n      <img className={styles.banner} src={post.data.banner.url} />\n      <main className={styles.container}>\n        <article className={styles.post}>\n          <h1>{post.data.title}</h1>\n\n          <section className={styles.postStatus}>\n            <time>\n              <FiCalendar />\n              {'  ' +\n                format(new Date(post.first_publication_date), 'dd MMM yyyy', {\n                  locale: ptBR,\n                })}\n            </time>\n            <span>\n              <FiUser />\n              {'  ' + post.data.author}\n            </span>\n            <span>\n              <FiClock /> {'  '} {Math.ceil(wordCount / 200)} min\n            </span>\n            <span>\n              {'* editado em ' +\n                format(new Date(post.last_publication_date), 'dd MMM yyyy', {\n                  locale: ptBR,\n                }) +\n                ', às ' +\n                format(new Date(post.last_publication_date), 'HH:mm', {\n                  locale: ptBR,\n                })}\n            </span>\n          </section>\n\n          <section className={styles.content}>\n            {post.data.content.map(({ heading, body }) => (\n              <Fragment key={heading}>\n                <h2>{heading}</h2>\n                <div\n                  dangerouslySetInnerHTML={{\n                    __html: PrismicDOM.RichText.asHtml(body),\n                  }}\n                />\n              </Fragment>\n            ))}\n          </section>\n        </article>\n\n        <div className={styles.navPosts}>\n          {previousPost.uid ? (\n            <Link href={`/post/${previousPost.uid}`}>\n              <a>\n                <strong>Previous Post</strong> <br />\n                {`${previousPost.title}`}\n              </a>\n            </Link>\n          ) : (\n            <a></a>\n          )}\n\n          {nextPost.uid ? (\n            <Link href={`/post/${nextPost.uid}`}>\n              <a>\n                <strong>Next Post</strong> <br />\n                {`${nextPost.title}`}\n              </a>\n            </Link>\n          ) : (\n            <a></a>\n          )}\n        </div>\n\n        <div style={{ marginBottom: '3rem' }}>\n          <UtterancesComments />\n        </div>\n\n        <div className={styles.previewMode}>\n          <script\n            async\n            defer\n            src=\"https://static.cdn.prismic.io/prismic.js?new=true&repo=spacetravelingblg\"\n          ></script>\n          {preview ? (\n            <aside>\n              <Link href=\"/api/exit-preview\">\n                <a>Sair do modo Preview</a>\n              </Link>\n            </aside>\n          ) : (\n            <aside>\n              <Link href=\"/api/preview\">\n                <a>Entrar no modo Preview</a>\n              </Link>\n            </aside>\n          )}\n        </div>\n      </main>\n    </>\n  );\n}\n\nexport const getStaticPaths: GetStaticPaths = async () => {\n  const prismic = getPrismicClient();\n  const posts = await prismic.query([\n    Prismic.predicates.at('document.type', 'pos'),\n  ]);\n\n  const paths = posts.results.map(post => ({ params: { slug: post.uid } }));\n\n  return {\n    paths: paths,\n    fallback: true,\n  };\n};\n\nexport const getStaticProps: GetStaticProps = async ({\n  params,\n  preview = false,\n}) => {\n  const { slug } = params;\n  const prismic = getPrismicClient();\n  const response = await prismic.getByUID('pos', String(slug), {});\n\n  if (!response) {\n    return {\n      redirect: {\n        destination: '/',\n        permanent: false,\n      },\n    };\n  }\n\n  const post = {\n    first_publication_date: response.first_publication_date,\n    last_publication_date: response.last_publication_date,\n    uid: response.uid,\n    data: {\n      title: response.data.title,\n      subtitle: response.data.subtitle,\n      banner: response.data.banner,\n      author: response.data.author,\n      content: response.data.content.map(({ heading, body }) => {\n        return {\n          heading: heading,\n          body: body,\n        };\n      }),\n    },\n  };\n\n  const responsePreviousPost = (\n    await prismic.query(\n      Prismic.Predicates.dateBefore(\n        'document.first_publication_date',\n        response.first_publication_date\n      ),\n      { orderings: '[document.first_publication_date]' }\n    )\n  ).results.pop();\n\n  const responseNextPost = (\n    await prismic.query(\n      Prismic.Predicates.dateAfter(\n        'document.first_publication_date',\n        response.first_publication_date\n      ),\n      { orderings: '[document.first_publication_date]' }\n    )\n  ).results[0];\n\n  const previousPost = {\n    uid: responsePreviousPost?.uid ? responsePreviousPost.uid : '',\n    title: responsePreviousPost?.data.title\n      ? responsePreviousPost.data.title\n      : '',\n  };\n\n  const nextPost = {\n    uid: responseNextPost?.uid ? responseNextPost.uid : '',\n    title: responseNextPost?.data.title ? responseNextPost.data.title : '',\n  };\n\n  return {\n    props: { post, previousPost, nextPost, preview },\n    revalidate: 60 * 30,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}